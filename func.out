#! /bin/vypint
# VYPcode: 1.0
# Generated by: xbedna73, xgajdo26

ALIAS FP $7

JUMP main

LABEL readInt
ADDI $SP, $SP, 1
SET $FP, $SP
READI $1
SET $SP, $FP
SUBI $SP, $SP, 1
RETURN [$SP]

LABEL readString
ADDI $SP, $SP, 1
SET $FP, $SP
READS $1
SET $SP, $FP
SUBI $SP, $SP, 1
RETURN [$SP]

LABEL length
ADDI $SP, $SP, 1
SET $FP, $SP
GETSIZE $1, [$FP - 2]
SET $SP, $FP
SUBI $SP, $SP, 1
RETURN [$SP]

LABEL __concat__
ADDI $SP, $SP, 1
SET $FP, $SP
GETSIZE $4, [$FP - 3]
GETSIZE $5, [$FP - 2]
COPY $6, [$FP - 3]
ADDI $1, $4, $5
RESIZE $6, $1
SET $2, 0
LABEL concat_begin
LTI $1, $2, $5
JUMPZ concat_end, $1
GETWORD $1, [$FP - 2], $2
ADDI $0, $2, $4
SETWORD $6, $0, $1
ADDI $2, $2, 1
JUMP concat_begin
LABEL concat_end
SET $1, $6
SET $SP, $FP
SUBI $SP, $SP, 1
RETURN [$SP]

LABEL main
ADDI $SP, $SP, 1
SET $FP, $SP
CREATE $5, 1
SETWORD $5, 0, ""
GETWORD $5, $5, 0
SET [$SP], $5
ADDI $SP, $SP, 1

#Simulate PUSH "abc"
ADDI $SP, $SP, 1
CREATE $5, 1
SETWORD $5, 0, "abc"
GETWORD $5, $5, 0
SET [$SP], $5

#Simulate PUSH "def"
ADDI $SP, $SP, 1
CREATE $5, 1
SETWORD $5, 0, "def"
GETWORD $5, $5, 0
SET [$SP], $5

#Simulate PUSH 0
ADDI $SP, $SP, 1
SET [$SP], 0

CALL [$SP], __concat__
#Simulate POP $6
SET $6, [$SP]
SUBI $SP, $SP, 1

#Simulate POP $6
SET $6, [$SP]
SUBI $SP, $SP, 1

#Simulate PUSH $1
ADDI $SP, $SP, 1
SET [$SP], $1

#Simulate POP $1
SET $1, [$SP]
SUBI $SP, $SP, 1

SET [$FP + 1], $1
#Simulate PUSH [$FP + 1]
ADDI $SP, $SP, 1
SET [$SP], [$FP + 1]

WRITES [$SP - 0]
#Simulate POP $6
SET $6, [$SP]
SUBI $SP, $SP, 1

JUMP __program_end__
LABEL __program_end__

